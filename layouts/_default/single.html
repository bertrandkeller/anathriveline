{{ define "main" }}
<div class="container">
  <section class="page-header--c">
    <h1 class="page-header-title">{{ .Title }}</h1>
  </section>
</div>
<section class="generic-single">
  <div class="single-container{{ if eq .Title "Roadmap"}} large{{ end }} markdown">
    <div class="date center">{{ with .Params.date }}Date : <time>{{ .Format "01/02/2006" | safeHTML }}</time>{{ end }}</div>
    <div class="note">
    <h2 class="hidden">Informations</h2>
    {{- $img := (printf "media/%s.jpg" (path.BaseName .File.Filename)) }}
    {{- $img     := ((resources.Get  $img)) }}
    {{ with $img }}
    <figure>
      <img src="{{ $img.Permalink }}" alt="">
    </figure>
    {{ end }}
    </figure>
    {{ with .Params.author }}<strong>Auteur(s):</strong> {{ . | safeHTML }}<br>{{ end }}
    {{ with .Params.genre }}<strong>Genre(s) :</strong> {{ . | safeHTML }}<br>{{ end }}
    {{ with .Params.editor }}<strong>Editeur :</strong> {{ . | safeHTML }}<br>{{ end }}
    {{ with .Params.year }}<strong>Année de parution :</strong> {{ . | safeHTML }}<br>{{ end }}
    {{ with .Params.tags }}<strong class="d-inline">Tags :</strong>
    <ul class="list-unstyled list-inline d-inline">
    {{ range . }}
      <li><a href="/tags/{{ . | urlize }}">{{ . }}</a></li>
    {{ end }}
    </ul>
    {{ end }}
    </div>

    {{- with .Params.blockquote }}
    <h2>Description</h2>
    {{ . | markdownify | safeHTML }}
    {{ end }}
    {{ partialCached "content.html" .Content .Content }}
    {{ if eq .Type "modules" }}
      {{ $ctx := . }}
      {{- with $ctx.Params.sorte -}}
        <strong>Type :</strong> {{ . }}
      {{- end -}}
      {{- with $ctx.Description -}}
        <p class="m-0"><strong>Description</strong>
        {{ . | markdownify }}
      {{- end -}}
      <div class="project-list-footer">
      {{- with $ctx.Params.skills -}}
        <strong>Compétences :</strong> {{ delimit . ", " }}
      {{- end -}}
      {{- if and $ctx.Params.persons $ctx.Params.days -}}
        <strong>Nombre de personnes à mobiliser :</strong> {{ $ctx.Params.persons }} personnes pendant {{ $ctx.Params.days }} jours
      {{- end -}}
      {{- if and $ctx.Params.persons $ctx.Params.days -}}
        <strong>Coût :</strong> {{ lang.FormatNumberCustom 0 (mul $ctx.Params.days 833.3333) }} euros
      {{- end -}}
      {{- with $ctx.Params.profil -}}
        <strong>Répartition du temps par profil :</strong>
        <ul>
        {{ range $key, $value := . }}
          <li>{{ $key | humanize }}: {{ $value }}%</li>
        {{ end }}
        </ul>
      {{- end -}}
      {{- with $ctx.Params.workshops -}}

            <strong>Ateliers potentiels :</strong>
            <ul>
            {{ range . }}
              {{ range (where (where $.Site.RegularPages "Section" "workshops") "Title" .) }}
                <li>
                  <a href="{{ .Permalink }}">{{ .Title }}</a><br>
                  <span>{{ .Description }}</span>
                </li>
              {{ end }}
            {{ end }}
          </ul>

      {{- end -}}
      {{- with $ctx.Params.urls -}}

        <strong>Pour aller plus loin :</strong>
        <ul>
        {{ range . }}
          <li>{{ . | markdownify }}</li>
        {{ end }}
        </ul>

      {{ end }}
    {{ end }}
    {{- with .Params.resources -}}
      {{ range . }}
      <h3>{{ .topic }}</h3>

        {{ with .urls }}
        <ul>
          {{ range . }}
            {{- $url := .url -}}
            <li><a href="{{ .url }}">{{ with .name }}{{ . }}{{ else }}{{ $url }}{{ end }}</a></li>
          {{ end }}
        </ul>
        {{ end }}

      {{ end }}
    {{ end }}
  </div>
</section>
{{- end -}}
